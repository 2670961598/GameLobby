import{d as w,r as m,k as x,c as G,a as l,b as s,e as k,v as y,x as L,y as b,F as g,f,l as B,p as V,q as d,s as S,t as c,u as D,h as a,i as N,_ as T}from"./index-DHcTEKWX.js";import{G as A}from"./GameCard-D-dtPGqD.js";import{u as M}from"./game-C5QLh6hG.js";import"./api-BwYmMII6.js";const U={class:"game-library"},z={class:"filters"},F={class:"search-bar"},q={class:"category-filter"},E=["value"],I={key:0,class:"loading-state"},O={key:1,class:"empty-state"},Q={key:0},Z={key:1},j={key:2},H={class:"game-list-header"},J={class:"sort-section"},K=["value"],P={class:"game-grid"},R={key:3,class:"game-stats"},W={class:"stats-text"},X={key:0},Y=w({__name:"GameLibrary",setup($){const p=M(),v=m(!0),i=m(""),r=m("all"),_=m("popularity"),h=[{id:"all",name:"全部游戏"},{id:"action",name:"动作游戏"},{id:"puzzle",name:"益智游戏"},{id:"adventure",name:"冒险游戏"},{id:"racing",name:"竞速游戏"},{id:"strategy",name:"策略游戏"}],C=[{id:"default",name:"默认排序 (A-Z)"},{id:"time",name:"时间排序"},{id:"popularity",name:"热度排序"}];x(async()=>{try{await p.fetchAllGames()}finally{v.value=!1}});const u=G(()=>{let n=p.allGames.filter(e=>{const o=e.title.toLowerCase().includes(i.value.toLowerCase())||e.description.toLowerCase().includes(i.value.toLowerCase()),t=r.value==="all"||e.category===r.value;return o&&t});switch(_.value){case"default":n=n.sort((e,o)=>e.title.localeCompare(o.title));break;case"time":n=n.sort((e,o)=>{const t=new Date(e.timestamp||"").getTime();return new Date(o.timestamp||"").getTime()-t});break;case"popularity":n=n.sort((e,o)=>(o.clicks||0)-(e.clicks||0));break}return n});return(n,e)=>{const o=S("router-link");return a(),l("div",U,[e[10]||(e[10]=s("div",{class:"library-header"},[s("h1",null,"游戏库"),s("p",null,"探索并游玩我们收录的网页小游戏")],-1)),s("div",z,[s("div",F,[y(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>i.value=t),type:"text",placeholder:"搜索游戏...","aria-label":"搜索游戏"},null,512),[[L,i.value]])]),s("div",q,[y(s("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>r.value=t),"aria-label":"按分类筛选"},[(a(),l(g,null,f(h,t=>s("option",{key:t.id,value:t.id},c(t.name),9,E)),64))],512),[[b,r.value]])])]),v.value?(a(),l("div",I,e[3]||(e[3]=[s("div",{class:"loading-spinner"},null,-1),s("p",null,"正在加载游戏...",-1)]))):u.value.length===0?(a(),l("div",O,[i.value||r.value!=="all"?(a(),l("p",Q," 没有找到符合条件的游戏。 ")):(a(),l("p",Z," 暂无游戏，快来上传第一个游戏吧！ ")),B(o,{to:"/upload",class:"btn-primary"},{default:V(()=>e[4]||(e[4]=[d("上传游戏")])),_:1,__:[4]})])):(a(),l("div",j,[s("div",H,[s("div",J,[e[5]||(e[5]=s("label",{for:"sort-select",class:"sort-label"},"排序：",-1)),y(s("select",{id:"sort-select","onUpdate:modelValue":e[2]||(e[2]=t=>_.value=t),class:"sort-select","aria-label":"排序方式"},[(a(),l(g,null,f(C,t=>s("option",{key:t.id,value:t.id},c(t.name),9,K)),64))],512),[[b,_.value]])])]),s("div",P,[(a(!0),l(g,null,f(u.value,t=>(a(),N(A,{key:t.id,game:t},null,8,["game"]))),128))])])),!v.value&&u.value.length>0?(a(),l("div",R,[s("p",W,[e[8]||(e[8]=d(" 共找到 ")),s("strong",null,c(u.value.length),1),e[9]||(e[9]=d(" 款游戏 ")),i.value||r.value!=="all"?(a(),l("span",X,[e[6]||(e[6]=d(" （总共 ")),s("strong",null,c(D(p).allGames.length),1),e[7]||(e[7]=d(" 款） "))])):k("",!0)])])):k("",!0)])}}}),oe=T(Y,[["__scopeId","data-v-0e7e46e4"]]);export{oe as default};
