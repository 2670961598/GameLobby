import{d as w,B as x,r as v,k as V,a as l,e as r,b as a,l as h,t as n,p as g,q as G,s as P,u as t,F as f,m as B,f as F,z as N,h as o,_ as L}from"./index-DHcTEKWX.js";import{u as O,i as T,s as A}from"./game-C5QLh6hG.js";import"./api-BwYmMII6.js";const D={class:"game-detail"},R={key:0,class:"loading-state"},I={key:1,class:"error-state"},M={class:"game-header"},q={class:"breadcrumbs"},z={class:"game-content"},E={class:"game-thumbnail"},U=["src","alt"],$={class:"game-info"},j={class:"meta-tags"},H={class:"category-tag"},J={key:0,class:"player-tag"},K={key:1,class:"offline-tag"},Q={class:"description"},W={class:"game-details"},X={class:"detail-item"},Y={key:0,class:"detail-item"},Z={key:1,class:"detail-item"},aa={class:"action-buttons"},ea=["disabled"],sa={key:0},ta={key:1},la={key:1,class:"share-button"},na={class:"game-stats"},oa={class:"stats-card leaderboard-preview"},ra={class:"leaderboard-list"},ia={class:"rank"},ca={class:"player-name"},da={class:"score"},ua=w({__name:"GameDetail",setup(ma){const b=x(),k=N(),e=O(),c=b.params.id,_=v(!0),d=v(""),i=v(!1),u=v(!1);V(async()=>{try{if(await e.loadGame(c),!e.currentGame){d.value="Game not found";return}i.value=await T(c)}catch(m){d.value="Failed to load the game",console.error(m)}finally{_.value=!1}});const C=()=>{console.log("从游戏详情页开始游戏（创建新房间）:",c),console.log("没有传递房间参数，游戏将自动生成新房间"),k.push(`/play/${c}`)},S=async()=>{if(e.currentGame){u.value=!0;try{await A(e.currentGame),i.value=!0}catch(m){console.error("Failed to cache game:",m)}finally{u.value=!1}}};return(m,s)=>{const y=P("router-link");return o(),l("div",D,[_.value?(o(),l("div",R,s[0]||(s[0]=[a("div",{class:"loading-spinner"},null,-1),a("p",null,"Loading game details...",-1)]))):d.value?(o(),l("div",I,[a("p",null,n(d.value),1),h(y,{to:"/games",class:"btn-primary"},{default:g(()=>s[1]||(s[1]=[G("Back to Games")])),_:1,__:[1]})])):t(e).currentGame?(o(),l(f,{key:2},[a("div",M,[a("div",q,[h(y,{to:"/games"},{default:g(()=>s[2]||(s[2]=[G("Games")])),_:1,__:[2]}),s[3]||(s[3]=a("span",{class:"separator"},"›",-1)),a("span",null,n(t(e).currentGame.title),1)])]),a("div",z,[a("div",E,[a("img",{src:t(e).currentGame.thumbnailUrl||"https://via.placeholder.com/600x400?text=Game",alt:t(e).currentGame.title},null,8,U)]),a("div",$,[a("h1",null,n(t(e).currentGame.title),1),a("div",j,[a("span",H,n(t(e).currentGame.category),1),t(e).currentGame.playerCount?(o(),l("span",J,n(t(e).currentGame.playerCount)+" Player"+n(t(e).currentGame.playerCount>1?"s":""),1)):r("",!0),i.value?(o(),l("span",K,"Available Offline")):r("",!0)]),a("div",Q,[a("p",null,n(t(e).currentGame.description),1)]),a("div",W,[a("div",X,[s[4]||(s[4]=a("span",{class:"label"},"Controls:",-1)),a("span",null,n(t(e).currentGame.controls||"Mouse and keyboard"),1)]),t(e).currentGame.author?(o(),l("div",Y,[s[5]||(s[5]=a("span",{class:"label"},"Created by:",-1)),a("span",null,n(t(e).currentGame.author),1)])):r("",!0),t(e).currentGame.version?(o(),l("div",Z,[s[6]||(s[6]=a("span",{class:"label"},"Version:",-1)),a("span",null,n(t(e).currentGame.version),1)])):r("",!0)]),a("div",aa,[a("button",{onClick:C,class:"play-button"}," Play Game "),!i.value&&t(e).currentGame.isOfflineAvailable?(o(),l("button",{key:0,onClick:S,class:"cache-button",disabled:u.value},[u.value?(o(),l("span",sa,"Saving...")):(o(),l("span",ta,"Save for Offline"))],8,ea)):i.value?(o(),l("button",la," Share Game ")):r("",!0)])])]),a("div",na,[a("div",oa,[s[7]||(s[7]=a("h3",null,"Top Players",-1)),a("ul",ra,[(o(),l(f,null,F(3,p=>a("li",{key:p,class:"leaderboard-item"},[a("span",ia,n(p),1),a("span",ca,"Player "+n(p),1),a("span",da,n(1e3-p*150),1)])),64))]),s[8]||(s[8]=a("button",{class:"view-all-btn"},"View Full Leaderboard",-1))]),s[9]||(s[9]=B('<div class="stats-card game-stats-info" data-v-ae410247><h3 data-v-ae410247>Game Stats</h3><ul class="stats-list" data-v-ae410247><li data-v-ae410247><span class="stat-label" data-v-ae410247>Total Plays:</span><span class="stat-value" data-v-ae410247>1,245</span></li><li data-v-ae410247><span class="stat-label" data-v-ae410247>Average Rating:</span><span class="stat-value" data-v-ae410247>4.7 / 5</span></li><li data-v-ae410247><span class="stat-label" data-v-ae410247>Offline Players:</span><span class="stat-value" data-v-ae410247>278</span></li></ul></div>',1))])],64)):r("",!0)])}}}),ya=L(ua,[["__scopeId","data-v-ae410247"]]);export{ya as default};
