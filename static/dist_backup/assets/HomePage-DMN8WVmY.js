import{G as de}from"./GameCard-D-dtPGqD.js";import{d as ee,r as u,c as M,w as ve,o as me,a as p,b as o,t as J,e as fe,n as I,F as K,f as O,g as Q,h as d,i as pe,j as be,_ as te,k as he,l as T,m as ge,p as $,q as z,s as _e,u as Y}from"./index-DHcTEKWX.js";import{u as ye}from"./game-C5QLh6hG.js";import"./api-BwYmMII6.js";const we={class:"game-carousel-section"},Me={class:"container"},Te={class:"section-subtitle"},xe={key:0,class:"loading-state"},Se={key:1,class:"empty-state"},ke={key:2,class:"carousel-section"},Le={class:"carousel-wrapper"},Xe={key:0,class:"carousel-indicators"},Ee=["onClick"],Ce=ee({__name:"GameCarousel",props:{games:{},title:{},subtitle:{},isLoading:{type:Boolean}},setup(W){const i=W,l=u(window.innerWidth),n=u(),a=u(0),v=u(!0),m=u(!1),r=u(!1),C=u(0),x=u(0),F=u(0),D=u(1);let S=null,k=null;const N=()=>{l.value=window.innerWidth},y=M(()=>l.value>=1200?4:l.value>=900?3:l.value>=600?2:1),g=M(()=>(l.value>=1200||l.value>=900||l.value>=600,280)),_=M(()=>20),ae=M(()=>y.value*g.value+(y.value-1)*_.value),b=M(()=>{const e=i.games.length;return e<=y.value?0:e-y.value}),L=()=>{X(),S=setInterval(()=>{v.value&&i.games.length>0&&!m.value&&!r.value&&se()},5e3)},X=()=>{S&&(clearInterval(S),S=null)},V=()=>{E(),k=setTimeout(()=>{!r.value&&!m.value&&re()},5e3)},E=()=>{k&&(clearTimeout(k),k=null)},se=()=>{if(m.value||i.games.length===0)return;m.value=!0;const e=a.value+D.value;e>b.value?(D.value=-1,a.value=b.value-1):e<0?(D.value=1,a.value=1):a.value=e,G()},ne=e=>{m.value||e===a.value||e>b.value||(m.value=!0,a.value=e,G())},G=()=>{if(!n.value)return;const e=g.value+_.value,t=a.value*e;n.value.style.transition="transform 0.8s ease-in-out",n.value.style.transform=`translateX(-${t}px)`,setTimeout(()=>{m.value=!1},800)},oe=e=>{const t=e.target;t.closest(".card-actions")||t.closest("a")||t.closest("button")||t.closest(".play-btn")||t.closest(".details-btn")||t.closest(".play-btn-disabled")||t.closest(".details-btn-disabled")||(e.preventDefault(),A(e.clientX),document.addEventListener("mousemove",B),document.addEventListener("mouseup",H))},le=e=>{const t=e.target;t.closest(".card-actions")||t.closest("a")||t.closest("button")||t.closest(".play-btn")||t.closest(".details-btn")||t.closest(".play-btn-disabled")||t.closest(".details-btn-disabled")||(A(e.touches[0].clientX),document.addEventListener("touchmove",P,{passive:!1}),document.addEventListener("touchend",U))},A=e=>{if(r.value=!0,console.log("å¼€å§‹æ‹–æ‹½ï¼ŒisDraggingè®¾ä¸ºtrue"),v.value=!1,C.value=e,x.value=e,n.value){const s=n.value.style.transform.match(/translateX\((-?\d+(?:\.\d+)?)px\)/);F.value=s?parseFloat(s[1]):0,n.value.style.transition="none"}X(),E()},B=e=>{r.value&&(e.preventDefault(),R(e.clientX))},P=e=>{r.value&&(e.preventDefault(),R(e.touches[0].clientX))},R=e=>{x.value=e;const t=x.value-C.value;if(n.value){const s=F.value+t,f=g.value+_.value,w=-b.value*f,c=Math.max(w,Math.min(0,s));n.value.style.transform=`translateX(${c}px)`}},H=()=>{j(),document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",H)},U=()=>{j(),document.removeEventListener("touchmove",P),document.removeEventListener("touchend",U)},j=()=>{var q;if(!r.value)return;console.log("ç»“æŸæ‹–æ‹½ï¼ŒisDraggingè®¾ä¸ºfalse"),r.value=!1;const e=x.value-C.value,t=g.value+_.value,s=(q=n.value)==null?void 0:q.style.transform,f=s==null?void 0:s.match(/translateX\((-?\d+(?:\.\d+)?)px\)/),w=f?parseFloat(f[1]):0,h=Math.abs(w)/t;let c=Math.round(h);Math.abs(e)>t/3&&(e>0?c=Math.floor(h):c=Math.ceil(h)),c=Math.max(0,Math.min(b.value,c)),a.value=c,G(),setTimeout(()=>{r.value||(v.value=!0,L(),V())},800)},re=()=>{if(!n.value||m.value||r.value)return;const e=g.value+_.value,s=n.value.style.transform.match(/translateX\((-?\d+(?:\.\d+)?)px\)/),f=s?parseFloat(s[1]):0,w=Math.abs(f)/e,h=Math.max(0,Math.min(b.value,Math.round(w))),c=-h*e;Math.abs(f-c)>1&&(a.value=h,n.value.style.transition="transform 0.5s ease-out",n.value.style.transform=`translateX(${c}px)`)},ue=()=>{v.value=!1,X(),E()},ie=()=>{!r.value&&!m.value&&(v.value=!0,L(),V())},ce=async()=>{window.addEventListener("resize",N),await Q(),L()};return ve(()=>i.games,async()=>{i.games.length>0&&(await Q(),a.value=0,n.value&&(n.value.style.transform="translateX(0px)"),L())},{immediate:!0}),me(()=>{window.removeEventListener("resize",N),X(),E()}),ce(),(e,t)=>(d(),p("section",we,[o("div",Me,[o("h2",null,J(e.title),1),o("p",Te,J(e.subtitle),1),e.isLoading?(d(),p("div",xe,t[0]||(t[0]=[o("div",{class:"loading-spinner"},null,-1),o("p",null,"æ­£åœ¨åŠ è½½æ¸¸æˆ...",-1)]))):e.games.length===0?(d(),p("div",Se,t[1]||(t[1]=[o("p",null,"æš‚æ— æ¸¸æˆ",-1)]))):(d(),p("div",ke,[o("div",{class:"carousel-container",style:I({width:ae.value+"px"}),onMouseenter:ue,onMouseleave:ie,onMousedown:oe,onTouchstart:le},[o("div",Le,[o("div",{ref_key:"carouselRef",ref:n,class:"game-carousel",style:I({cursor:r.value?"grabbing":"grab"})},[(d(!0),p(K,null,O(e.games,(s,f)=>(d(),pe(de,{key:s.id,game:s,class:"carousel-item",style:I({width:g.value+"px",marginRight:_.value+"px"})},null,8,["game","style"]))),128))],4)])],36),e.games.length>y.value?(d(),p("div",Xe,[(d(!0),p(K,null,O(b.value+1,s=>(d(),p("span",{key:s-1,class:be(["indicator",{active:s-1===a.value}]),onClick:f=>ne(s-1)},null,10,Ee))),128))])):fe("",!0)]))])]))}}),Z=te(Ce,[["__scopeId","data-v-a7cf0a08"]]),De={class:"home-page"},Ge={class:"hero"},Ie={class:"container"},$e={class:"hero-header"},ze={class:"hero-content"},We={class:"hero-actions"},Fe=ee({__name:"HomePage",setup(W){const i=ye(),l=u(!0);return he(async()=>{try{await i.fetchFeaturedGames(),await i.fetchRecentGames()}finally{l.value=!1}}),(n,a)=>{const v=_e("router-link");return d(),p("div",De,[o("section",Ge,[o("div",Ie,[o("div",$e,[T(v,{to:"/lobby",class:"lobby-link"},{default:$(()=>a[0]||(a[0]=[o("span",{class:"lobby-icon"},"ğŸ®",-1),z(" è”æœºå¤§å… ")])),_:1,__:[0]})]),o("div",ze,[a[3]||(a[3]=o("h1",null,"å°æ¸¸æˆé›†åˆ",-1)),a[4]||(a[4]=o("p",{class:"hero-subtitle"}," å‘ç°å¹¶æ¸¸ç©HTML5æ¸¸æˆï¼Œä¸æœ‹å‹åˆ†äº«ï¼Œæ”¯æŒç¦»çº¿æ¸¸ç©ï¼ ",-1)),o("div",We,[T(v,{to:"/games",class:"btn-primary"},{default:$(()=>a[1]||(a[1]=[z("æµè§ˆæ¸¸æˆ")])),_:1,__:[1]}),T(v,{to:"/upload",class:"btn-secondary"},{default:$(()=>a[2]||(a[2]=[z("ä¸Šä¼ ä½ çš„æ¸¸æˆ")])),_:1,__:[2]})])])])]),T(Z,{games:Y(i).featuredGames,title:"å¤§å®¶åœ¨ç©",subtitle:"æœ€å—æ¬¢è¿çš„çƒ­é—¨æ¸¸æˆ","is-loading":l.value},null,8,["games","is-loading"]),T(Z,{games:Y(i).recentGames,title:"æœ€è¿‘ä¸Šæ–°",subtitle:"æœ€æ–°ä¸Šä¼ çš„æ¸¸æˆ","is-loading":l.value},null,8,["games","is-loading"]),a[5]||(a[5]=ge('<section class="features" data-v-f0bb9674><div class="container" data-v-f0bb9674><h2 data-v-f0bb9674>å¹³å°ç‰¹è‰²</h2><div class="features-grid" data-v-f0bb9674><div class="feature-card" data-v-f0bb9674><div class="feature-icon" data-v-f0bb9674>ğŸ®</div><h3 data-v-f0bb9674>éšæ—¶æ¸¸ç©</h3><p data-v-f0bb9674>æ¸¸æˆæœ¬åœ°ç¼“å­˜ï¼Œä»»ä½•è®¾å¤‡éƒ½å¯ç¦»çº¿æ¸¸ç©</p></div><div class="feature-card" data-v-f0bb9674><div class="feature-icon" data-v-f0bb9674>ğŸ‘¥</div><h3 data-v-f0bb9674>å¤šäººæ¸¸æˆ</h3><p data-v-f0bb9674>ä¸æœ‹å‹è¿æ¥ï¼Œäº«å—å®æ—¶å¤šäººæ¸¸æˆä¹è¶£</p></div><div class="feature-card" data-v-f0bb9674><div class="feature-icon" data-v-f0bb9674>ğŸ†</div><h3 data-v-f0bb9674>æ’è¡Œæ¦œ</h3><p data-v-f0bb9674>ç«äº‰é«˜åˆ†ï¼Œè¿½è¸ªä½ çš„æ¸¸æˆè¿›åº¦</p></div><div class="feature-card" data-v-f0bb9674><div class="feature-icon" data-v-f0bb9674>ğŸ“±</div><h3 data-v-f0bb9674>è·¨å¹³å°</h3><p data-v-f0bb9674>æ”¯æŒæ¡Œé¢ã€å¹³æ¿ã€æ‰‹æœºçš„å“åº”å¼è®¾å¤‡</p></div></div></div></section>',1))])}}}),Pe=te(Fe,[["__scopeId","data-v-f0bb9674"]]);export{Pe as default};
