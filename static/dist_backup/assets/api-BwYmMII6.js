const o=async(s,e)=>{let a;s.startsWith("/")?a=`http://172.18.67.143:11452${s}`:a=`http://172.18.67.143:11452/${s}`,console.log("API请求 [生产]:",{原始endpoint:s,最终URL:a,模式:"prod"});const t={"Content-Type":"application/json"};e!=null&&e.headers&&(e.headers instanceof Headers?e.headers.forEach((r,l)=>{t[l]=r}):Array.isArray(e.headers)?e.headers.forEach(([r,l])=>{t[r]=l}):Object.assign(t,e.headers)),(e==null?void 0:e.body)instanceof FormData&&(delete t["Content-Type"],console.log("检测到FormData，移除Content-Type头"));const c={...e,headers:t};try{console.log("发起请求:",a,c);const r=await fetch(a,c);return console.log("请求响应:",{url:a,status:r.status,statusText:r.statusText,ok:r.ok}),r}catch(r){throw console.error("API request failed:",{url:a,error:r instanceof Error?r.message:String(r),options:c}),r}},f=(s,e,a)=>o(s,{...a,method:"POST",body:e instanceof FormData?e:JSON.stringify(e)});export{o as a,f as p};
